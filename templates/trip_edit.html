<!-- templates/trip_edit.html -->
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Edit Your Travel Plan{% endblock title %}

{% block content %}
<div class="container mx-auto mt-8 px-4">
    <div class="w-full max-w-2xl mx-auto">
        <div class="bg-[#1e293b] border border-gray-700 rounded-2xl shadow-lg p-8">

            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-white">Edit Your Adventure</h1>
                <p class="text-slate-400 mt-2">Update the details for your trip to <strong class="text-cyan-400">{{ object.destination }}</strong>.</p>
            </div>

            <form method="post" id="plan-form">
                {% csrf_token %}

                <!-- Crispy maydonlarni chizadi -->
                {% crispy form %}

                <div class="mt-6">
                    <button type="submit" class="w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-3 px-4 rounded-lg transition-colors" id="submit-button">
                        Save Changes & Regenerate
                    </button>
                </div>


            </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block javascript %}
<script>
    // BU JAVASCRIPT ENDI 100% ISHLASHI KERAK
    const planForm = document.getElementById('plan-form');
    const submitButton = document.getElementById('submit-button');

    if (planForm && submitButton) {
        planForm.addEventListener('submit', function() {
            submitButton.disabled = true;
            submitButton.innerHTML = `
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-black inline" ...>
                    <!-- SVG kodi -->
                </svg>
                Re-generating...
            `;
        });
    }
</script>
{% endblock javascript %}